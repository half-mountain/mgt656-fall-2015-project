extend layout

block mainContent
  .skinny-container.event-detail-page
    h1#title 
      center  #{event.title}
    if event.image
      center
        img#image(src='#{event.image}')
    br
    br
    .location
      strong Where: 
      span#location #{event.location}
    .date
      strong When: 
      span#date #{moment(event.date).format("dddd, MMMM Do, YYYY, h:mm a")}
    ul#attendees.pull-left
      strong RSVP'd: 
      if event.attending.length > 0
        for attendee in event.attending 
          li #{attendee}
      else
        em
          | No one yet! 
    ul#thingstobring.pull-right
      strong Things To Bring: 
      if event.items && event.items.length > 0 
        for item in event.items
          li #{item}
      else
        br
        em
          | Nothing yet! Add some things to bring! 
    .clearfix
    div
      center
        a(href='/donation') 
          span.donation Donate to
          |  this event!
    div
      ul.form-errors
        if errors
          for error in errors
            li #{error}
    form#email(action="#{'/events/' + event.id + '/rsvp'}", method='POST', placeholder='Enter your email here!')
      input.form-control(type='email', name='email', placeholder='RSVP to this event')
      input.form-control(type='submit', class='btn btn-default' value='Submit')
    form#thingstobring(action="#{'/events/' + event.id + '/addThingToBring'}", method="POST", placeholder='ex: the booze')
      label(for='item') Potluck Items:
      input(type='item', name='item')
      input(type='submit', value='Submit')
  // Load the Content Experiment JavaScript API client for the experiment
  script(src='//www.google-analytics.com/cx/api.js?experiment=kThzmsmBTR-NDg0LPCORRA')
  // Load the JQuery library
  script(src='//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js')
  script.
    // Define JavaScript for each page variation of this experiment.
    var pageVariations = [
    function() {
    },  
    function() {    
    $( '.donation' ).text("Support");
    }
    ];
    // Wait for the DOM to load, then execute the view for the chosen variation.
    $(document).ready(function() {
    // Ask Google Analytics which variation to show the user.
    var chosenVariation = cxApi.chooseVariation();
    // Execute the chosen view
    pageVariations[chosenVariation]();
    }
    );
  // Recall Default Google Analytics script to push tracking data
  script.
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-70408363-1', 'auto');
    ga('send', 'pageview');
  
  script.
    $('body').css('background-image', 'url(#{event.image})');
